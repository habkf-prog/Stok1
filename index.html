<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù„ÙˆØ­Ø© ØªØ³ÙŠÙŠØ± Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</title>

<style>
/* ====== THEME ====== */
:root{
  --bg0:#070a12;
  --bg1:#0b1020;
  --card: rgba(255,255,255,.06);
  --line: rgba(255,255,255,.10);
  --text:#eaf0ff;
  --muted: rgba(234,240,255,.70);
  --accent:#7c5cff;
  --warn:#f59e0b;
  --err:#ef4444;
  --radius:18px;
  --shadow: 0 18px 45px rgba(0,0,0,.45);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  color: var(--text);
  background:
    radial-gradient(1200px 650px at 85% -10%, rgba(124,92,255,.25), transparent 60%),
    radial-gradient(1000px 600px at 10% 0%, rgba(34,197,94,.18), transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  padding: 18px;
}
.container{max-width:1200px;margin:0 auto}
.card{
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
  overflow:hidden;
}

/* ===== TABLE ===== */
.tableWrap{overflow-x:auto;-webkit-overflow-scrolling:touch}
table{width:100%;border-collapse:separate;border-spacing:0;min-width:920px}
thead th{
  position:sticky;top:0;z-index:5;
  background:rgba(0,0,0,.22);
  color:var(--muted);
  font-size:12px;font-weight:900;
  padding:12px;border-bottom:1px solid var(--line)
}
tbody td{padding:12px;border-bottom:1px solid rgba(255,255,255,.07)}
tbody tr:hover{background:rgba(255,255,255,.03)}
.badge{padding:6px 10px;border-radius:999px;border:1px solid var(--line);font-weight:900;font-size:12px}
.badge.ok{color:#c8f7d9;border-color:rgba(34,197,94,.45)}
.badge.warn{color:#ffe2b3;border-color:rgba(245,158,11,.45)}
.badge.err{color:#ffd0d0;border-color:rgba(239,68,68,.45)}

/* ===== BUTTONS ===== */
.btn{
  padding:10px 12px;border-radius:14px;
  border:1px solid var(--line);
  background:rgba(0,0,0,.18);
  color:var(--text);font-weight:900;cursor:pointer
}
.btn.primary{
  background:linear-gradient(135deg,rgba(124,92,255,.55),rgba(124,92,255,.15));
  border-color:rgba(124,92,255,.55)
}
.btn.danger{
  background:linear-gradient(135deg,rgba(239,68,68,.35),rgba(239,68,68,.12));
  border-color:rgba(239,68,68,.55)
}

/* ===== TOAST ===== */
.toast{
  position:fixed;
  left:50%;bottom:18px;
  transform:translateX(-50%) translateY(20px);
  min-width:min(520px,calc(100% - 28px));
  padding:12px 14px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(10,14,26,.92);
  box-shadow:0 18px 45px rgba(0,0,0,.55);
  color:var(--text);
  font-weight:900;
  display:flex;gap:10px;align-items:center;
  opacity:0;pointer-events:none;
  transition:.18s;z-index:10000
}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);pointer-events:auto}
.toast .action{
  margin-inline-start:auto;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
  color:var(--text);font-weight:900;cursor:pointer
}

/* ===== MISC ===== */
.topbar{padding:14px;display:flex;gap:10px;flex-wrap:wrap;border-bottom:1px solid var(--line)}
.actionPill{padding:8px 12px;border-radius:14px;border:1px solid var(--line);background:rgba(255,255,255,.05);cursor:pointer}
</style>
</head>

<body>
<div class="container">
  <div class="card">
    <div class="topbar">
      <button class="btn primary" id="add">â• Ø¥Ø¶Ø§ÙØ©</button>
      <button class="btn danger" id="clear">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„</button>
    </div>

    <div class="tableWrap">
      <table>
        <thead>
          <tr>
            <th>Ø§Ù„Ø§Ø³Ù…</th>
            <th>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</th>
            <th>Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</th>
            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            <th>Ø¥Ø¬Ø±Ø§Ø¡</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>
  </div>
</div>

<div id="toast" class="toast"></div>

<script>
/* ===== DATA ===== */
let data = JSON.parse(localStorage.getItem("subs_data")||"[]");

/* ===== TOAST ===== */
let toastTimer=null;
function showToast(html,withUndo=false,onUndo=null){
  const t=document.getElementById("toast");
  t.innerHTML=html+(withUndo?'<button class="action" id="undo">â†©ï¸ ØªØ±Ø§Ø¬Ø¹</button>':"");
  t.classList.add("show");
  clearTimeout(toastTimer);
  toastTimer=setTimeout(()=>t.classList.remove("show"),7000);
  if(withUndo){
    document.getElementById("undo").onclick=()=>{onUndo&&onUndo();t.classList.remove("show")}
  }
}

/* ===== UNDO BACKUP (SAFE) ===== */
const UNDO_KEY="subs_undo_v1";
function snapshot(){
  localStorage.setItem(UNDO_KEY,JSON.stringify(data));
}
function undo(){
  const b=localStorage.getItem(UNDO_KEY);
  if(!b)return;
  data=JSON.parse(b);
  save();render();
  showToast("âœ… ØªÙ… Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¨Ù†Ø¬Ø§Ø­");
}

/* ===== HELPERS ===== */
function save(){
  localStorage.setItem("subs_data",JSON.stringify(data));
}
function status(d){
  return new Date(d)<new Date()?"err":"ok";
}

/* ===== RENDER ===== */
function render(){
  const tb=document.getElementById("tbody");
  tb.innerHTML="";
  if(!data.length){
    tb.innerHTML='<tr><td colspan="5" style="text-align:center;opacity:.7">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</td></tr>';
    return;
  }
  for(const r of data){
    tb.innerHTML+=`
      <tr>
        <td>${r.name}</td>
        <td>${r.email}</td>
        <td>${r.end}</td>
        <td><span class="badge ${status(r.end)}">${status(r.end)==="ok"?"ÙØ¹Ù‘Ø§Ù„":"Ù…Ù†ØªÙ‡ÙŠ"}</span></td>
        <td><button class="actionPill" onclick="del('${r.id}')">ğŸ—‘ï¸</button></td>
      </tr>`;
  }
}

/* ===== ACTIONS ===== */
document.getElementById("add").onclick=()=>{
  const name=prompt("Ø§Ù„Ø§Ø³Ù…"); if(!name)return;
  const email=prompt("Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„"); if(!email)return;
  const end=prompt("ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ (YYYY-MM-DD)"); if(!end)return;
  data.unshift({id:Date.now(),name,email,end});
  save();render();
};

document.getElementById("clear").onclick=()=>{
  if(!data.length)return;
  if(!confirm("Ø­Ø°Ù Ø§Ù„ÙƒÙ„ØŸ"))return;
  snapshot();
  const c=data.length;
  data=[];
  save();render();
  showToast(`ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù ${c} Ø³Ø¬Ù„`,true,undo);
};

window.del=(id)=>{
  snapshot();
  data=data.filter(x=>x.id!=id);
  save();render();
  showToast("ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„",true,undo);
};

render();
</script>
</body>
</html>
